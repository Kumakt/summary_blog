[{"authors":["admin"],"categories":null,"content":"自分が勉強したことを記録する備忘録\n","date":1549324800,"expirydate":-62135596800,"kind":"term","lang":"en","lastmod":1567641600,"objectID":"2525497d367e79493fd32b198b28f040","permalink":"/author/kumakt/","publishdate":"0001-01-01T00:00:00Z","relpermalink":"/author/kumakt/","section":"authors","summary":"自分が勉強したことを記録する備忘録","tags":null,"title":"Kumakt","type":"authors"},{"authors":["吳恩達"],"categories":null,"content":"吳恩達 is a professor of artificial intelligence at the Stanford AI Lab. His research interests include distributed robotics, mobile computing and programmable matter. He leads the Robotic Neurobiology group, which develops self-reconfiguring robots, systems of self-organizing robots, and mobile sensor networks.\nLorem ipsum dolor sit amet, consectetur adipiscing elit. Sed neque elit, tristique placerat feugiat ac, facilisis vitae arcu. Proin eget egestas augue. Praesent ut sem nec arcu pellentesque aliquet. Duis dapibus diam vel metus tempus vulputate.\n","date":-62135596800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":-62135596800,"objectID":"704f87b982c35398f63c73390b73c8f5","permalink":"/author/%E5%90%B3%E6%81%A9%E9%81%94/","publishdate":"0001-01-01T00:00:00Z","relpermalink":"/author/%E5%90%B3%E6%81%A9%E9%81%94/","section":"authors","summary":"吳恩達 is a professor of artificial intelligence at the Stanford AI Lab. His research interests include distributed robotics, mobile computing and programmable matter. He leads the Robotic Neurobiology","tags":null,"title":"吳恩達","type":"authors"},{"authors":null,"categories":["R"],"content":"\r一般事項\rRにはグラフを書く上でおもに２つの方法がある。\nデフォルトのgraphicsで扱うplot関数などとggplot2パッケージによる方法である。\nここでは医学系でよく扱うグラフをggplot2を実装する。\n\rデータの準備\rあるA市とB市で収縮期血圧を調査した設定で架空データを作成する。\nset.seed(125) # 乱数の固定のシード\ra \u0026lt;- rnorm(n = 100, mean = 140, sd = 10)\rb \u0026lt;- rnorm(n = 100, mean = 60, sd = 5 )\rc \u0026lt;- rep(c(\u0026quot;A_city\u0026quot;,\u0026quot;B_city\u0026quot;),50)\rd \u0026lt;- rbinom(n = 100, size = 1, prob = 0.6) # ここでは男性の割合を0.6として二項分布によるランダム値の作成\rstudy \u0026lt;- data.frame(a,b,c,d)\rname \u0026lt;- c(\u0026quot;SBP\u0026quot;, \u0026quot;Age\u0026quot;, \u0026quot;City\u0026quot;, \u0026quot;Sex\u0026quot;) colnames(study) \u0026lt;- name\r# 性別は二値なのでデータ型を変換する\rstudy$Sex \u0026lt;- as.factor(study$Sex)\rstudy$Sex \u0026lt;- factor(study$Sex,levels = c(1,0),\rlabels = c(\u0026quot;Male\u0026quot;,\u0026quot;Female\u0026quot;))\r\rデータの確認\rsummary(study)\r## SBP Age City Sex ## Min. :103.9 Min. :46.80 A_city:50 Male :63 ## 1st Qu.:134.6 1st Qu.:56.90 B_city:50 Female:37 ## Median :141.7 Median :59.93 ## Mean :141.0 Mean :60.09 ## 3rd Qu.:147.9 3rd Qu.:63.14 ## Max. :164.0 Max. :72.41\r\r散布図\rggplotでは要素を追記していく形が基本となる。\n散布図で連続変数同士の関係をみる。\n例えば年齢と収縮期血圧の関係を見たい場合\nlibrary(ggplot2)\rggplot(data = study, aes(x = Age, y = SBP, colour = City)) + # ここがベースで、使用するデータ、軸、およびcolourを指定することでカテゴリーごとに色分けできる\rgeom_point(size = 4) + # 散布図にするという指定\rxlab(\u0026quot;Age\u0026quot;) + # x軸ラベルの命名\rylab(\u0026quot;SBP\u0026quot;) + # y軸ラベルの命名\rggtitle(\u0026quot;SBP調査\u0026quot;) + # グラフタイトルの命名\rtheme_bw() \rA市もB市も同じくらいばらついていそうである。\n\r箱ひげ図\r離散型の変数と連続型の変数の関係をみるために使う。\n箱ひげ図により統計量(平均値、標準偏差)も一緒に図示できる。\nggplot(data = study, aes(x = City, y = SBP, colour = City)) +\rgeom_boxplot() + # ここがboxplotに変わっただけ\rgeom_jitter() + # 各点のばらつきを追加する\r# geom_point(size = 3, alpha = 0.5) +\rxlab(\u0026quot;Age\u0026quot;) + ylab(\u0026quot;SBP\u0026quot;) + ggtitle(\u0026quot;SBP調査\u0026quot;) + theme_bw()\r\rバイオリンプロット\rバイオリンプロットによりデータの分布の密度も可視化することができる。\n# バイオリンプロットも描くことができる\rggplot(data = study, aes(x = City, y = SBP, colour = City)) +\rgeom_violin() +\rxlab(\u0026quot;Age\u0026quot;) + ylab(\u0026quot;SBP\u0026quot;) + ggtitle(\u0026quot;SBP調査\u0026quot;) + theme_bw()\r\rヒストグラム\r連続変数などの分布をみる。\nここでは両方の都市での年齢の分布を示している。\n# ヒストグラム\rggplot(data = study, aes(x = Age)) +\rgeom_histogram(binwidth = 2) + # ヒストグラム描きます、階級値は2にしますという宣言\rfacet_wrap(~City) # 群別の図を書くことができる\r\r棒グラフ\r今回のデータでは必要性が乏しいが\nggplot(data = study, aes(x = City, y = SBP, fill = Sex)) +\rgeom_bar(stat = \u0026quot;identity\u0026quot;, position = \u0026quot;dodge\u0026quot;) +\rxlab(\u0026quot;Sex\u0026quot;) +\rylab(\u0026quot;SBP\u0026quot;)\r\r","date":1594692794,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1594692794,"objectID":"10065deaa3098b0da91b78b48d0efc71","permalink":"/post/2015-07-23-r-rmarkdown/","publishdate":"2020-07-13T21:13:14-05:00","relpermalink":"/post/2015-07-23-r-rmarkdown/","section":"post","summary":"一般事項 Rにはグラフを書く上でおもに２つの方法がある。 デフォ","tags":["R Markdown","ggplot","regression"],"title":"Rによるグラフ基礎","type":"post"},{"authors":["Kumakt"],"categories":["R"],"content":"\r一般事項\rある変数と別の変数の関係を数式で表したものを回帰モデルと呼ぶ。\n両者の関係が線形で与えられると仮定したものが線形回帰モデルである。\n式で表すと、\n\\[y = \\beta_0 + \\beta_1x\\]\nである。\n実際のデータでこのモデルを考える際には、観測値と仮定したモデルとの間には誤差が生じるため\n\\(y_i = \\beta_0 + \\beta_1x_i + \\epsilon_i\\)となる。\n\\(i = 1,2,3...n\\)である。\nこのモデルがデータに良くあてはまるためには誤差\\(\\epsilon_i\\)の総和が小さくなるようなパラメータを求めればよい。\nただし、線形回帰モデルと観測値の差は負の値になることもあるため、そのまま総和をとるわけでなく、2乗して\n総和をとる。これが最小二乗法である。\n\r架空データの作成\rここでは収縮期血圧と年齢の関係をみる単純なモデルを考える。\n# 乱数発生で毎回同じ値になるようにseedを設定する\rset.seed(123)\r# ある程度線形モデルにフィットするようにするため相関を指定\rrho \u0026lt;- 0.65\r# 正規分布に従う乱数の設定(サンプルサイズ、平均、標準偏差は自由に設定可能)\ry \u0026lt;- rnorm(n = 50, mean = 140, sd = 10)\rx \u0026lt;- rnorm(n = 50, mean = 65, sd = 10)\rz \u0026lt;- rnorm(n = 50, mean = 0, sd = 10)\r# 相関をもった現実味のある値にするため、それぞれbpとageに格納\r# sqrtは平方根という意味\rbp \u0026lt;- sqrt(rho)*z + sqrt(1 - rho)*y + 30\rage \u0026lt;- sqrt(rho)*z + sqrt(1 - rho)*x + 30\r# データフレームという形式でbpとageをdataというオブジェクトに格納\rdata \u0026lt;- data.frame(age,bp)\r# 列に名前を付ける\rname \u0026lt;- c(\u0026quot;age\u0026quot;,\u0026quot;SBP\u0026quot;)\rcolnames(data) \u0026lt;- name\r# これで収縮期血圧と年齢の関係を示すデータが完成\r\rデータの確認を行う\r次は実際にどんなデータであるか確認を行う。\n# 外れ値や欠損値など\r# summaryはデータの平均などを示す関数、headは先頭から指定の行を表示\rsummary(data)\r## age SBP ## Min. :47.15 Min. : 91.89 ## 1st Qu.:62.03 1st Qu.:103.05 ## Median :66.83 Median :111.74 ## Mean :67.27 Mean :110.98 ## 3rd Qu.:72.59 3rd Qu.:118.22 ## Max. :83.99 Max. :134.37\rhead(data, n = 3)\r## age SBP\r## 1 64.22569 103.7818\r## 2 70.35670 113.5344\r## 3 66.21200 120.0577\r# strは各変数の形式を示す、実際の解析ではどの形式なのか数値型なのか因子型なのかといった形の確認が重要\rstr(data)\r## \u0026#39;data.frame\u0026#39;: 50 obs. of 2 variables:\r## $ age: num 64.2 70.4 66.2 73.7 59.4 ...\r## $ SBP: num 104 114 120 110 106 ...\r\r図示\rデータの分布を散布図を描いて確認を行う。\nplot関数でも描くことができるが今回はggplot2を用いる。\nlibrary(ggplot2)\rggplot(data = data,\raes(x = age, y = SBP)) +\rgeom_point() +\rtheme_bw()\r散布図をみる限り、年齢と収縮期血圧には線形の関係がありそうに見える。\n\rモデルを作成する\rここでは２変量の単純なモデルを作成する。\nlm関数は線形回帰モデルを作成する。\nmodel \u0026lt;- lm(data = data, bp ~ age)\rsummary(model)\r## ## Call:\r## lm(formula = bp ~ age, data = data)\r## ## Residuals:\r## Min 1Q Median 3Q Max ## -14.833 -4.858 0.504 6.091 13.138 ## ## Coefficients:\r## Estimate Std. Error t value Pr(\u0026gt;|t|) ## (Intercept) 62.2829 8.1559 7.637 7.83e-10 ***\r## age 0.7239 0.1202 6.022 2.32e-07 ***\r## ---\r## Signif. codes: 0 \u0026#39;***\u0026#39; 0.001 \u0026#39;**\u0026#39; 0.01 \u0026#39;*\u0026#39; 0.05 \u0026#39;.\u0026#39; 0.1 \u0026#39; \u0026#39; 1\r## ## Residual standard error: 7.478 on 48 degrees of freedom\r## Multiple R-squared: 0.4304, Adjusted R-squared: 0.4185 ## F-statistic: 36.26 on 1 and 48 DF, p-value: 2.322e-07\rResidualsは残差のことで誤差の予測値とみなすことができる。\nCoefficientsは係数の結果である。切片と係数に該当する。\n今回のモデルは、\n\\(y_i = 62.283 + 0.724x_i\\)と表すことができる。\n\rモデルの評価\rlibrary(ggfortify)\rautoplot(model, smooth.colour = NA)\r## Warning: `arrange_()` is deprecated as of dplyr 0.7.0.\r## Please use `arrange()` instead.\r## See vignette(\u0026#39;programming\u0026#39;) for more help\r## This warning is displayed once every 8 hours.\r## Call `lifecycle::last_warnings()` to see where this warning was generated.\r## Warning: Removed 50 row(s) containing missing values (geom_path).\r## Warning: Removed 50 row(s) containing missing values (geom_path).\r## Warning: Removed 50 row(s) containing missing values (geom_path).\r右上のQQplotはおおむね問題なさそうであり、残差は正規分布していそうである。\nまた左下の図をみても分散に明らかな偏りはなさそうであり、等分散性が保たれていると思われる。\r(ばらつきは比較的ありそうである)\nまた先のsummaryの結果をみるとR-squaredという項目があるが、これが決定係数である。\n予測値を\\(\\hat{y_i}\\)、平均値を\\(\\bar{y}\\)と表すと、\n\\[R^2 =1 - \\frac{\\sum_{i=1}^n(y_i - \\hat{y_i})^2}{\\sum_{i=1}^n(y_i - \\bar{y})^2}\\]\nとなる。決定係数は1に近いほど当てはまりがよいのであるから、この分数の部分が0に近ければよい。\n分子が小さくなる、つまり予測値と観測値が近いほど0に近づく、決定係数が1に近づくということになる。\n\r最後に散布図に線形回帰直線をひいてみる\rggplot(data = data,\raes(x = age, y = SBP)) +\rgeom_point() +\rstat_smooth(method = \u0026quot;lm\u0026quot;, se = TRUE, size = 1) +\rtheme_bw()\r## `geom_smooth()` using formula \u0026#39;y ~ x\u0026#39;\r\r結果\r今回の年齢と収縮期血圧の関係では、年齢が高くなるほど線形に収縮期血圧が高くなると予想し、モデルを作成した。\nモデルの前提は満たされているようであり、係数も有意な結果であった。\nしかし決定係数は修正\\(R^2\\)および\\(R^2\\)ともに良いとは言えず、収縮期血圧について年齢だけのモデルでは、\r十分に説明できていないことになる。\n実際の臨床でも血圧を予測するうえで他に、家族歴など様々な要因が重要であることは当然であり、年齢だけで\r十分に説明できないということは妥当であるといえる。\n\r","date":1594648657,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1594735057,"objectID":"7437ae4ba188ef9b40a9b05be7d80bd0","permalink":"/post/linear/","publishdate":"2020-07-13T22:57:37+09:00","relpermalink":"/post/linear/","section":"post","summary":"Rによる線形回帰モデルの実装","tags":["regression"],"title":"線形回帰モデルの基礎","type":"post"},{"authors":["Kumakt"],"categories":[],"content":"from IPython.core.display import Image Image('https://www.python.org/static/community_logos/python-logo-master-v3-TM-flattened.png')  print(\u0026quot;Welcome to Academic!\u0026quot;)  Welcome to Academic!  Install Python and JupyterLab  Install Anaconda which includes Python 3 and JupyterLab.\nAlternatively, install JupyterLab with pip3 install jupyterlab.\nCreate or upload a Jupyter notebook Run the following commands in your Terminal, substituting \u0026lt;MY-WEBSITE-FOLDER\u0026gt; and \u0026lt;SHORT-POST-TITLE\u0026gt; with the file path to your Academic website folder and a short title for your blog post (use hyphens instead of spaces), respectively:\nmkdir -p \u0026lt;MY-WEBSITE-FOLDER\u0026gt;/content/post/\u0026lt;SHORT-POST-TITLE\u0026gt;/ cd \u0026lt;MY-WEBSITE-FOLDER\u0026gt;/content/post/\u0026lt;SHORT-POST-TITLE\u0026gt;/ jupyter lab index.ipynb  The jupyter command above will launch the JupyterLab editor, allowing us to add Academic metadata and write the content.\nEdit your post metadata The first cell of your Jupter notebook will contain your post metadata ( front matter).\nIn Jupter, choose Markdown as the type of the first cell and wrap your Academic metadata in three dashes, indicating that it is YAML front matter:\n--- title: My post's title date: 2019-09-01 # Put any other Academic metadata here... ---  Edit the metadata of your post, using the documentation as a guide to the available options.\nTo set a featured image, place an image named featured into your post\u0026rsquo;s folder.\nFor other tips, such as using math, see the guide on writing content with Academic.\nConvert notebook to Markdown jupyter nbconvert index.ipynb --to markdown --NbConvertApp.output_files_dir=.  Example This post was created with Jupyter. The orginal files can be found at https://github.com/gcushen/hugo-academic/tree/master/exampleSite/content/post/jupyter\n","date":1549324800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1567641600,"objectID":"6e929dc84ed3ef80467b02e64cd2ed64","permalink":"/post/jupyter/","publishdate":"2019-02-05T00:00:00Z","relpermalink":"/post/jupyter/","section":"post","summary":"Learn how to blog in Academic using Jupyter notebooks","tags":[],"title":"デフォルトのまま(Display Jupyter Notebooks with Academic)","type":"post"}]